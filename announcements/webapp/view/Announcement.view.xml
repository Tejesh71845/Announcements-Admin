<mvc:View
    controllerName="com.incture.announcements.controller.Announcement"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
    xmlns:f="sap.f"
>
    <f:DynamicPage headerExpanded="true">
        <f:content>
            <smartTable:SmartTable
                id="announcementsSmartTable"
                entitySet="Announcements"
                tableType="ResponsiveTable"
                enableAutoBinding="true"
                useVariantManagement="true"
                useTablePersonalisation="true"
                header="Announcements"
                showRowCount="true"
                enableExport="false"
                demandPopin="true"
                class="sapUiResponsiveContentPadding"
                beforeRebindTable="onBeforeRebindTable"
                enableAutoColumnWidth="true"
                placeToolbarInTable="true"
                requestAtLeastFields="description,announcementStatus,announcementType"
            >
                <smartTable:customToolbar>
                    <OverflowToolbar design="Transparent">
                        <ToolbarSpacer />
                        <Button
                            text="Create Announcement"
                            type="Emphasized"
                            icon="sap-icon://add"
                            press="onCreatePress"
                        />
                        <Button
                            icon="sap-icon://refresh"
                            type="Transparent"
                            tooltip="Refresh"
                            press="onRefreshPress"
                        />
                    </OverflowToolbar>
                </smartTable:customToolbar>
                <smartTable:layoutData>
                    <FlexItemData
                        growFactor="1"
                        baseSize="0%"
                    />
                </smartTable:layoutData>
                <Table
                    growing="true"
                    growingThreshold="5"
                >
                    <columns>
                        <Column>
                            <Text text="Created On" />
                            <customData>
                                <core:CustomData
                                    key="p13nData"
                                    value="{'columnKey': 'createdAt', 'columnIndex': '2', 'leadingProperty': 'createdAt'}"
                                />
                            </customData>
                        </Column>

                        <Column>
                            <Text text="Modified On" />
                            <customData>
                                <core:CustomData
                                    key="p13nData"
                                    value="{'columnKey': 'modifiedAt', 'columnIndex': '3', 'leadingProperty': 'modifiedAt'}"
                                />
                            </customData>
                        </Column>

                        <Column>
                            <Text text="Published On" />
                            <customData>
                                <core:CustomData
                                    key="p13nData"
                                    value="{'columnKey': 'publishedAt', 'columnIndex': '4', 'leadingProperty': 'publishedAt'}"
                                />
                            </customData>
                        </Column>

                        <Column>
                            <Text text="Status" />
                            <customData>
                                <core:CustomData
                                    key="p13nData"
                                    value="{'columnKey': 'announcementStatus', 'columnIndex': '5', 'leadingProperty': 'announcementStatus'}"
                                />
                            </customData>
                        </Column>
                        <Column>
                            <Text text="Actions" />
                            <customData>
                                <core:CustomData
                                    key="p13nData"
                                    value="{'columnKey': 'Actions', 'columnIndex': '31', 'leadingProperty': 'Actions', 'sortProperty': 'Actions', 'filterProperty': 'Actions'}"
                                />
                            </customData>
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem type="Active">
                            <cells>
                                <Text
                                    text="{
                                            path: 'createdAt',
                                            formatter: '.formatDateOnly'
                                        }"
                                />

                                <Text
                                    text="{
                                            path: 'modifiedAt',
                                            formatter: '.formatDateOnly'
                                        }"
                                />

                                <Text
                                    text="{
                                            path: 'publishedAt',
                                            formatter: '.formatDateOnly'
                                        }"
                                />

                                <ObjectStatus
                                    text="{
                                            path: 'announcementStatus',
                                            formatter: '.formatStatusText'
                                        }"
                                    state="{
                                            path: 'announcementStatus',
                                            formatter: '.formatStatusState'
                                        }"
                                />

                                <HBox justifyContent="Center">
                                    <Button
                                        icon="sap-icon://edit"
                                        type="Transparent"
                                        tooltip="Edit"
                                        press="onEditPress"
                                    />
                                    <Button
                                        icon="sap-icon://delete"
                                        type="Transparent"
                                        tooltip="Delete"
                                        press="onDeletePress"
                                    />
                                </HBox>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </smartTable:SmartTable>
        </f:content>
    </f:DynamicPage>
</mvc:View>
