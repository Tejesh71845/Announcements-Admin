<mvc:View
    controllerName="com.incture.announcements.controller.CreateSidebarAnnouncement"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    displayBlock="true"
>
    <Page
        id="idSidebarPage"
        showHeader="true"
    >
        <customHeader>
            <core:Fragment
                fragmentName="com.incture.announcements.fragments.ShellBar"
                type="XML"
            />
        </customHeader>

        <content>
            <VBox
                class="sapUiSmallMargin"
                fitContainer="true"
            >
                <!-- Header Section - Fixed alignment -->
                <VBox class="sapUiSmallMarginBottom">
                    <HBox
                        alignItems="Center"
                        class="sapUiSmallMarginBottom"
                    >
                        <Button
                            icon="sap-icon://nav-back"
                            type="Transparent"
                            press="onNavBack"
                        />
                        <Title
                            text="{i18n>createSidebarAnnouncementTitle}"
                            class="sapUiTinyMarginBegin"
                        />
                    </HBox>
                    <Text
                        text="Messages seen on the right side of the home page."
                        class="sapUiTinyMarginTop"
                    />
                </VBox>

                <!-- Title and Popup Announcement Section -->
                <VBox
                    class="announcementDetailsSectionCss sapUiSmallMarginBottom"
                >
                    <l:Grid
                        defaultSpan="L6 M6 S12"
                        hSpacing="1"
                        vSpacing="1"
                    >
                        <VBox>
                            <Label
                                text="{i18n>titleLabel}"
                                required="true"
                                class="sapUiTinyMarginBottom"
                            />
                            <Input
                                id="idTitleFld"
                                placeholder="{i18n>titlePlaceholder}"
                                value="{sidebarModel>/title}"
                                valueState="{sidebarModel>/titleValueState}"
                                valueStateText="{sidebarModel>/titleValueStateText}"
                                maxLength="100"
                                width="100%"
                                change="onInputChange"
                            />
                            <Text text="0/100" />
                        </VBox>

                        <VBox>
                            <Label
                                text="{i18n>popupAnnouncementLabel}"
                                class="sapUiTinyMarginBottom"
                            />
                            <HBox alignItems="Center">
                                <Switch
                                    id="idPopupAnnouncementSwitch"
                                    state="{sidebarModel>/popupAnnouncement}"
                                    customTextOn=" "
                                    customTextOff=" "
                                    change="onPopupSwitchChange"
                                />
                                <Text
                                    text="Turn this on to visible as high importance messages seen as a pop up with important '!' icon"
                                    class="sapUiTinyMarginBegin"
                                />
                            </HBox>
                        </VBox>
                    </l:Grid>

                    <!-- Rich Text Editor Section - Full Width -->
                    <VBox class="sapUiSmallMarginTop">
                        <HBox
                            alignItems="Center"
                            justifyContent="SpaceBetween"
                            class="sapUiTinyMarginBottom"
                        >
                            <Label
                                text="What do you want it to say?"
                                required="true"
                            />
                            <!-- <Text text="0/100" /> -->
                        </HBox>
                        <VBox
                            id="idRichTextCntr"
                            width="100%"
                        >
                            <!-- RTE will be added dynamically -->
                        </VBox>
                        <HBox
                            justifyContent="End"
                            class="sapUiTinyMarginTop"
                        >
                            <Text text="0/500" />
                        </HBox>
                    </VBox>
                </VBox>

                <!-- Publishing Settings Section -->
                <VBox class="publishingSettingsSectionCss sapUiSmallMarginTop">
                    <Title
                        text="{i18n>publishingSettingsSection}"
                        level="H2"
                        class="sapUiSmallMarginBottom"
                    />
                    <l:Grid
                        defaultSpan="L4 M6 S12"
                        hSpacing="1"
                        vSpacing="1"
                    >
                        <VBox>
                            <Label
                                text="{i18n>publishDateLabel}"
                                required="true"
                                class="sapUiTinyMarginBottom"
                            />
                            <DatePicker
                                id="idPublishDateDP"
                                value="{sidebarModel>/publishDate}"
                                valueState="{sidebarModel>/publishDateValueState}"
                                valueStateText="{sidebarModel>/publishDateValueStateText}"
                                displayFormat="dd/MM/yyyy"
                                valueFormat="yyyy-MM-dd"
                                minDate="{sidebarModel>/minPublishDate}"
                                change="onPublishDateChange"
                                placeholder="MM-DD-YYYY"
                                width="100%"
                            />
                            <Text
                                text="The announcement will be published today."
                                class="sapUiTinyMarginTop"
                            />
                        </VBox>

                        <VBox>
                            <Label
                                text="{i18n>expiryDateLabel}"
                                required="true"
                                class="sapUiTinyMarginBottom"
                            />
                            <DatePicker
                                id="idExpiryDateDP"
                                value="{sidebarModel>/expiryDate}"
                                valueState="{sidebarModel>/expiryDateValueState}"
                                valueStateText="{sidebarModel>/expiryDateValueStateText}"
                                displayFormat="dd/MM/yyyy"
                                valueFormat="yyyy-MM-dd"
                                minDate="{sidebarModel>/minExpiryDate}"
                                change="onExpiryDateChange"
                                placeholder="MM-DD-YYYY"
                                width="100%"
                            />
                            <Text
                                text="Please select expiry date to hide the announcement"
                                class="sapUiTinyMarginTop"
                                wrapping="true"
                            />
                        </VBox>

                        <VBox>
                            <Label
                                text="{i18n>publishLaterLabel}"
                                class="sapUiTinyMarginBottom"
                            />
                            <HBox alignItems="Center">
                                <Switch
                                    id="idPublishLaterSwitch"
                                    state="{sidebarModel>/publishLater}"
                                    customTextOn=" "
                                    customTextOff=" "
                                    change="onPublishLaterChange"
                                />
                                <Text
                                    text="Select a future date to automatically publish the announcement"
                                    class="sapUiTinyMarginBegin"
                                    wrapping="true"
                                />
                            </HBox>
                        </VBox>
                    </l:Grid>
                </VBox>

                <!-- Audience Metadata Section -->
                <VBox class="audienceMetadataSectionCss sapUiSmallMarginTop">
                    <Title
                        text="{i18n>audienceMetadataSection}"
                        level="H2"
                        class="sapUiSmallMarginBottom"
                    />
                    <l:Grid
                        defaultSpan="L6 M6 S12"
                        hSpacing="1"
                        vSpacing="1"
                    >
                        <VBox>
                            <Label
                                text="{i18n>categoryLabel}"
                                class="sapUiTinyMarginBottom"
                            />
                            <ComboBox
                                id="idCategoryCB"
                                placeholder="{i18n>categoryPlaceholder}"
                                selectedKey="{sidebarModel>/category}"
                                selectionChange="onCategoryChange"
                                items="{categoryModel>/category}"
                                width="100%"
                            >
                                <core:Item
                                    key="{categoryModel>key}"
                                    text="{categoryModel>text}"
                                />
                            </ComboBox>
                        </VBox>

                        <VBox>
                            <Label
                                text="{i18n>organizationLabel}"
                                required="true"
                                class="sapUiTinyMarginBottom"
                            />
                            <HBox>
                                <CheckBox
                                    id="idFinanceChk"
                                    text="Finance"
                                    selected="true"
                                    select="onOrganizationChange"
                                    enabled="false"
                                />
                                <CheckBox
                                    id="idNonFinanceChk"
                                    text="Non-Finance"
                                    selected="true"
                                    select="onOrganizationChange"
                                    class="sapUiSmallMarginBegin"
                                    enabled="false"
                                />
                            </HBox>
                        </VBox>
                    </l:Grid>

                    <VBox class="sapUiSmallMarginTop">
                        <Label
                            text="{i18n>sectorLabel}"
                            required="false"
                            class="sapUiTinyMarginBottom"
                        />
                        <HBox wrap="Wrap">
                            <CheckBox
                                id="idCorporateChk"
                                text="Corporate"
                                selected="true"
                                select="onSectorChange"
                                enabled="false"
                            />
                            <CheckBox
                                id="idInnovativeMedicineChk"
                                text="Innovative Medicine"
                                selected="true"
                                select="onSectorChange"
                                class="sapUiSmallMarginBegin"
                                enabled="false"
                            />
                            <CheckBox
                                id="idMedTechChk"
                                text="MedTech"
                                selected="true"
                                select="onSectorChange"
                                class="sapUiSmallMarginBegin"
                                enabled="false"
                            />
                        </HBox>
                    </VBox>
                </VBox>
            </VBox>
        </content>

        <footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button
                    id="idResetBtn"
                    text="{i18n>resetButton}"
                    press="onResetPress"
                    visible="{sidebarModel>/showResetButton}"
                />
                <Button
                    id="idSubmitBtn"
                    text="{i18n>submitButton}"
                    type="Emphasized"
                    press="onSubmitPress"
                />
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
